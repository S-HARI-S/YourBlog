<!DOCTYPE html>
<html lang="en">


  <%- include('./partials/head.ejs') %>

  
<body style="background-color: rgb(175, 148, 148);">



  <%- include('./partials/nav.ejs'); %>

<div class="createnew" style="text-align: center; font-size: 2rem; color: red;">
  <button onclick="window.location.href='/create'" href="create.html" class="btn btn-primary">
  CREATE NEW</button></div>


<div class="container-fluid  ">
  
    
      <% if (blogs.length === 0 ){ %>
 
        <h1>No blogs yet.....</h1>
     
        
        <% } else { %>
     
          <div class="row mt-5">

         <%  blogs.forEach(blog =>{   %>
          
         

          
          <div class="col-sm-6 col-md-4">
               <div class="card text-white bg-dark mb-3" style=" box-shadow: 25px 25px rgba(0, 0, 0, 0.418);">
                   <div class="card-header"><%= blog.heading %></div>
                    <div class="card-body">
                     <p class="card-text">writer : <%= blog.author %></p>
                </div>
                <div class ="card-footer d-flex justify-content-end">

                  <a href= "/edit/<%= blog._id %>" class="mr -4 text-white"> <i  class="fas fa-edit"></i></a>

                  &nbsp&nbsp
                  &nbsp&nbsp
                  &nbsp&nbsp


                  <a href= "" class="mr -4 text-white"><i id= "<%= blog._id %>" onclick="deleteBtn(event)" class="fas fa-trash"></i> </a>
                  
                </div>
                
              </div>
          
            </div>
        <% }) %>

      </div>

      <% } %>
      
    </div>
</div>



<script>

const deleteBtn = (event) => {

event.preventDefault();

  console.log(event.target.id);
  const id = event.target.id;

const endpoint = `/blog/${id}`;

  fetch(endpoint, {

    method : 'DELETE'
  } )
     .then(response => response.json())
     .then(data => window.location.href = '/editor')
     .catch(err => console.log(err) );

}

</script>


<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>